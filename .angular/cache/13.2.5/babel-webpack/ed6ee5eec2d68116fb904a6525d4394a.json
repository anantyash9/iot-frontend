{"ast":null,"code":"import { TtsComponent } from '../tts/tts.component';\nimport { isDefined } from '@angular/compiler/src/util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/interview.service\";\nimport * as i2 from \"keycloak-angular\";\nimport * as i3 from \"../../services/io.service\";\nimport * as i4 from \"../../services/event.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../tts/tts.component\";\n\nfunction IntroComponent_mat_spinner_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nfunction IntroComponent_mat_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-card\", 3)(1, \"div\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"mat-card-subtitle\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"br\")(9, \"app-wave\", 4);\n    i0.ɵɵelementStart(10, \"mat-card-actions\")(11, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function IntroComponent_mat_card_2_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.start();\n    });\n    i0.ɵɵtext(12, \"Start Interview\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 6, ctx_r1.heading), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.subheading, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hight\", ctx_r1.innerHeight * 0.2)(\"width\", ctx_r1.innerWidth * 0.55)(\"lineWidth\", 3)(\"color\", ctx_r1.color);\n  }\n}\n\nexport let IntroComponent = /*#__PURE__*/(() => {\n  class IntroComponent {\n    constructor(interviewservice, keycloakservice, ioService, eventService, router, tts) {\n      this.interviewservice = interviewservice;\n      this.keycloakservice = keycloakservice;\n      this.ioService = ioService;\n      this.eventService = eventService;\n      this.router = router;\n      this.tts = tts;\n      this.color = \"#d90202\";\n      this.loaded = false;\n      this.keycloakservice.loadUserProfile().then(data => {\n        this.heading = \"Hi \" + data.firstName;\n        this.name = data.firstName;\n      });\n    }\n\n    ngOnInit() {\n      if (!isDefined(this.interviewservice.questionset)) {\n        console.log('navigating out');\n        this.router.navigate(['']);\n      } else {\n        this.innerWidth = window.innerWidth;\n        this.innerHeight = window.innerHeight;\n        this.subheading = \"This is an interview for \" + this.interviewservice.questionset.name;\n        let text = this.interviewservice.questionset.intro.replace(/#named#/gi, this.name);\n        this.ioService.sendMessage('tts', {\n          text: text,\n          audio: {\n            language: ''\n          }\n        });\n        this.ioService.socket.on('audio', () => {\n          this.loaded = true;\n        });\n        this.tts.ngAfterViewInit();\n      }\n    }\n\n    start() {\n      try {\n        this.tts.stopOutput();\n      } catch (_a) {}\n\n      this.router.navigate(['/interviewquestion']);\n    }\n\n    ngOnDestroy() {\n      try {\n        this.tts.stopOutput();\n      } catch (_a) {}\n    }\n\n  }\n\n  IntroComponent.ɵfac = function IntroComponent_Factory(t) {\n    return new (t || IntroComponent)(i0.ɵɵdirectiveInject(i1.InterviewService), i0.ɵɵdirectiveInject(i2.KeycloakService), i0.ɵɵdirectiveInject(i3.IoService), i0.ɵɵdirectiveInject(i4.EventService), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i6.TtsComponent));\n  };\n\n  IntroComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: IntroComponent,\n    selectors: [[\"app-intro\"]],\n    hostBindings: function IntroComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"unloaded\", function IntroComponent_unloaded_HostBindingHandler() {\n          return ctx.ngOnDestroy();\n        });\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([TtsComponent])],\n    decls: 3,\n    vars: 2,\n    consts: [[1, \"info-container\"], [4, \"ngIf\"], [\"id\", \"info-card\", \"class\", \"info-card\", 4, \"ngIf\"], [\"id\", \"info-card\", 1, \"info-card\"], [3, \"hight\", \"width\", \"lineWidth\", \"color\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", \"type\", \"start\", 1, \"button\", 3, \"click\"]],\n    template: function IntroComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, IntroComponent_mat_spinner_1_Template, 1, 0, \"mat-spinner\", 1);\n        i0.ɵɵtemplate(2, IntroComponent_mat_card_2_Template, 13, 8, \"mat-card\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loaded);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loaded);\n      }\n    },\n    styles: [\".info-card[_ngcontent-%COMP%]{max-width:60vw;width:60vw;max-height:80vh;text-align:center}.info-container[_ngcontent-%COMP%]{width:100%;height:80%;display:flex;justify-content:center;align-items:center;text-align:center;margin:0;overflow:hidden}.button[_ngcontent-%COMP%]{margin-right:20px}\"]\n  });\n  return IntroComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}